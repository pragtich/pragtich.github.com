<!DOCTYPE HTML>
<html lang="en">
<!-- Set up & clean variables --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Joris Pragt’s site – Installing compiled images onto Beaglebone Black SD card</title>
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../../../../default.css" media="screen">
<!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><link rel="alternate" type="application/rss+xml" title="Pragtich blog
    feed" href="http://pragti.ch/atom.xml">
</head>
<body>
  <titleframe><titlebar><div id="largetitle"> <a href="../../../../../">Pragtich</a>
	  </div>

	  <div id="secnav">
	  </div>
	  <div id="artnav">
	  </div> 
	</titlebar>
  </titleframe>
<article>
  <header>
	<hgroup>
	  
	  <h1 class="itemtitle">Installing compiled images onto Beaglebone Black SD card</h1>
      <h2 class="itemdate">10 Oct 2013</h2>
	</hgroup>
  </header>
  <summary>
	So you've managed to compile an Angstrom Linux image. How to get it onto the Beaglebone?
</summary>
<bodytext>
  <h1>What&#39;s the point?</h1>

<p>So I managed to compile an image for the Beaglebone Black. The documentation is not bad, but it took some time to wait for some bugs to get updated in the <code>git</code>. This was thanks to VirtualBox and Ubuntu, as compiling on OS X was too painful. Compiling pretty much followed the basis instructions <a href="http://www.angstrom-distribution.org/building-angstrom">at the main website</a>. And I could see the image files available (hint: look in the subfolder <code>work</code> and find the <code>deploy</code> subfolder. </p>

<p>But how to get this stuff onto the Beaglebone Black, and running?</p>

<h1>Creating a bootable SD card for Beaglebone Black</h1>

<p>Actually, someone before me <a href="http://cwraig.id.au/?p=507">has been considerate and shared his experience (locally) compiling and installing Angstrom for Beaglebone Black</a>. This is pretty much a copy of what he does.</p>

<p>Because of trouble getting a USB cardreader to show up un VirtualBox, and the incompatibility of the <code>mkcard.txt</code> script with OS X, I decided to use the BBB itself to write the SD card. This is based on the standard firmware from the circuitco website. So that is the set of executables that I had available. I booted the BBB with a nonbooting card (so that it will boot from the eMMC). The SD card then is located at <code>/mnt/sda</code>. The beaglebone is also on the network via the LAN port.</p>

<p>Then:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">#!bash
root@beaglebone:~# wget http://www.angstrom-distribution.org/demo/beaglebone/mkcard.txt
mkcard.txt mkcard.sh  
chmod +x mkcard.sh 
./mkcard.sh /dev/sda

cd /mnt
mkdir Angstrom
mkdir boot
mount -t vfat /dev/disk/by-label/boot boot
mount /dev/disk/by-label/Angstrom Angstrom/

df -h
</code></pre></div>
<p>This results in the following confirmation that we have stuff mounted right:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">#!bash
Filesystem      Size  Used Avail Use% Mounted on
rootfs          1.7G  1.1G  515M  69% /
/dev/root       1.7G  1.1G  515M  69% /
devtmpfs        250M     0  250M   0% /dev
tmpfs           250M  4.0K  250M   1% /dev/shm
tmpfs           250M  252K  250M   1% /run
tmpfs           250M     0  250M   0% /sys/fs/cgroup
tmpfs           250M  4.0K  250M   1% /tmp
/dev/mmcblk0p1   70M   55M   16M  79% /media/BEAGLEBONE
/dev/sda1        70M   512   70M   1% /mnt/boot
/dev/sda2       1.8G   35M  1.7G   3% /mnt/Angstrom
</code></pre></div>
<p>Ready for installing the images!</p>

<h1>Installing the images</h1>

<p>Simply followed the stuff <a href="http://cwraig.id.au/?p=507">from here</a>:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">#!bash
cd
mkdir installs
cd installs
scp -r pragtich@10.0.0.102user@host:~/compiled-image-deploy-folder .
cd compiled-image-deploy-folder
cp u-boot-beaglebone-2013.04-r0.img /mnt/boot/uImage
cp MLO-beaglebone-2013.04 /mnt/boot/MLO
tar -xmv -C /mnt/Angstrom/ -f Angstrom-systemd-image-eglibc-ipk-v2012.12-beaglebone.rootfs.tar.gz 
umount /mnt/boot 
umount /mnt/Angstrom 
</code></pre></div>
<p>Then reboot and...</p>

<h1>Test!</h1>
<div class="highlight"><pre><code class="language-text" data-lang="text">#!bash
root@beaglebone:~# uname -a
Linux beaglebone 3.8.13 #1 SMP Sun Oct 13 15:59:25 CEST 2013 armv7l GNU/Linux
root@beaglebone:~# ps aux
ps: invalid option -- &#39;a&#39;
BusyBox v1.20.2 (2013-09-14 09:40:16 CEST) multi-call binary.

Usage: ps 
</code></pre></div>
<p>So the smaller <code>ps</code> delivered by <code>BusyBox</code> is now active, not the richer GNU version in the default install. Running <code>ps</code> also shows much less processes:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">#!bash
root@beaglebone:~# ps
</code></pre></div>
<p>PID USER       VSZ STAT COMMAND
     1 root      4680 S    {systemd} /sbin/init
     2 root         0 SW   [kthreadd]
     3 root         0 SW   [ksoftirqd/0]
     4 root         0 SW   [kworker/0:0]
     5 root         0 SW&lt;  [kworker/0:0H]
     6 root         0 SW   [kworker/u:0]
     7 root         0 SW&lt;  [kworker/u:0H]
     8 root         0 SW   [migration/0]
     9 root         0 SW   [rcu<em>bh]
    10 root         0 SW   [rcu</em>sched]
    11 root         0 SW   [watchdog/0]
    12 root         0 SW&lt;  [khelper]
    13 root         0 SW   [kdevtmpfs]
    14 root         0 SW&lt;  [netns]
    15 root         0 SW   [kworker/0:1]
    16 root         0 SW   [bdi-default]
    17 root         0 SW&lt;  [kintegrityd]
    18 root         0 SW&lt;  [kblockd]
    19 root         0 SW   [khubd]
    20 root         0 SW   [irq/86-44e0b000]
    21 root         0 SW   [kworker/u:1]
    24 root         0 SW   [irq/23-tps65217]
    27 root         0 SW   [irq/46-4819c000]
    36 root         0 SW&lt;  [rpciod]
    38 root         0 SW   [khungtaskd]
    39 root         0 SW   [kswapd0]
    40 root         0 SW   [fsnotify<em>mark]
    41 root         0 SW&lt;  [nfsiod]
    42 root         0 SW&lt;  [crypto]
    45 root         0 SW&lt;  [pencrypt]
    46 root         0 SW&lt;  [pdecrypt]
    53 root         0 SW&lt;  [OMAP UART0]
    57 root         0 SW&lt;  [kpsmoused]
    58 root         0 SW   [irq/150-mmc0]
    70 root         0 SW   [kworker/u:2]
    71 root         0 DW   [mmcqd/0]
    74 root         0 SW   [mmcqd/1]
    75 root         0 SW   [mmcqd/1boot0]
    76 root         0 SW   [mmcqd/1boot1]
    77 root         0 SW&lt;  [deferwq]
    80 root         0 SW&lt;  [kworker/0:1H]
    81 root         0 SW   [jbd2/mmcblk0p2-]
    82 root         0 SW&lt;  [ext4-dio-unwrit]
    89 root     36536 S    /lib/systemd/systemd-journald
    91 root      3428 S    /lib/systemd/systemd-udevd
    94 root         0 SW   [kworker/0:2]
    117 root         0 SW   [ext4lazyinit]
    204 root         0 SW   [flush-179:0]
    304 root      2976 S    /lib/systemd/systemd-logind
    305 root      2152 S    /sbin/klogd -n
    306 root      2216 S    /sbin/syslogd -n -C64
    308 root      5392 S    /usr/sbin/connmand -n
    309 avahi     3168 S    avahi-daemon: running [beaglebone.local]
    311 root      1844 S    /sbin/agetty -s ttyO0 115200
    312 root      1844 S    /sbin/agetty --noclear tty1 38400 linux
    317 avahi     3052 S    avahi-daemon: chroot helper
    323 root      4644 S    /usr/sbin/wpa</em>supplicant -u
    327 root      2956 S    /usr/sbin/dropbear -i -r /etc/dropbear/dropbear<em>rsa</em>host_key -p 22
    328 root      2332 S    -sh
    331 root      2332 R    ps
    root@beaglebone:~# ps</p>

<p>Done!</p>

<footer>
  <p>
<h1>Possibly related posts:</h1>
  	  
<reftitle><a href="/computer%20stuff/2012/09/22/OpenWRT-on-the-TL-WR703N/">Installing OpenWRT on a TL-WR703N router using a USB stick as storage </a>
	  
      <h2 class="itemdate">22 Sep 2012</h2>
</reftitle>

<reftitle><a href="/blogging/2013/02/03/migrating-from-nanoc-to-jekyll/">Migrating from nanoc to jekyll </a>
	  
<img src="http://www.pragti.ch/indeximages/jekyll.jpg">

      <h2 class="itemdate">03 Feb 2013</h2>
</reftitle>

<reftitle><a href="/kippycam/2012/08/15/Adding-an-I2C-interface-to-the-TL-WR703N/">Adding an I2C interface to the TL-WR703N </a>
	  
<img src="http://www.pragti.ch/indeximages/index-i2c.jpg">

      <h2 class="itemdate">15 Aug 2012</h2>
</reftitle>

<reftitle><a href="/computer%20stuff/2012/12/15/GNU-Emacs-24/">Switching to GNU Emacs 24 on Mac OS X </a>
	  
<img src="http://www.pragti.ch/indeximages/emacs.jpg">

      <h2 class="itemdate">15 Dec 2012</h2>
</reftitle>

<reftitle><a href="/computer%20stuff/2012/07/04/Nanoc-Github-Pages/">Using Nanoc to fill Github Pages </a>
	  
      <h2 class="itemdate">04 Jul 2012</h2>
</reftitle>


  </p>
  <div id="disqus_thread"></div>
  <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'pragtich'; // required: replace example with your forum shortname
  var disqus_identifier = 'bbb-install-comiledimage';
            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
  </script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span>
  </a>
</footer>
</article>
  
<nav>
    <h2>All articles</h2> 
	<ul>
	  <li>
		<a href="http://www.pragti.ch/blog/index.html">Index of all articles</a> </li>

	</ul>
	<H2>Categories</h2>
    <ul>
	  
	    <li>
		  <a href="http://www.pragti.ch/categories/computer-stuff">Computer stuff</a>
		</li>

	  
	    <li>
		  <a href="http://www.pragti.ch/categories/life">Life</a>
		</li>

	  
	    <li>
		  <a href="http://www.pragti.ch/categories/kippycam">Kippycam</a>
		</li>

	  
	    <li>
		  <a href="http://www.pragti.ch/categories/blogging">Blogging</a>
		</li>

	  
	    <li>
		  <a href="http://www.pragti.ch/categories/project-euler">Project Euler</a>
		</li>

	  
    </ul>
	<h2>About</h2>
    <ul>
	  <li><a href="../../../../../about/">About me</a></li>
  </ul>
  </nav>
</body>
</html>
