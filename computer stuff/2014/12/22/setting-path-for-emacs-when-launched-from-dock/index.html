<!DOCTYPE HTML>
<html lang="en">
<!-- Set up & clean variables --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Joris Pragt’s site – Setting PATH for Emacs when launched from Dock</title>
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../../../../default.css" media="screen">
<!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><link rel="alternate" type="application/rss+xml" title="Pragtich blog
    feed" href="http://pragti.ch/atom.xml">
</head>
<body>
  <titleframe><titlebar><div id="largetitle"> <a href="../../../../../">Pragtich</a>
	  </div>

	  <div id="secnav">
	  </div>
	  <div id="artnav">
	  </div> 
	</titlebar>
  </titleframe>
<article>
  <header>
	<hgroup>
	  <img src="http://pragti.ch/indeximages/EmacsAutomator.jpg">
	  <h1 class="itemtitle">Setting PATH for Emacs when launched from Dock</h1>
      <h2 class="itemdate">22 Dec 2014</h2>
	</hgroup>
  </header>
  <summary>
	How to get Emacs' PATH setup properly so that python-mode will work
</summary>
<bodytext>
  <h1 id="setting-path-for-applications-started-from-the-dock-in-os-x-1010-yosemite">Setting PATH for applications started from the Dock in OS X 10.10 Yosemite</h1>

<p>I recently switched from Fink to Homebrew, the most up-to-date packaging system for Mac OS X 10.10 Yosemite. With that, I also decided to install the Emacs 24.1 directly from Homebrew instead of from one of the OS X-specific compiled versions available. This works fine:</p>

<pre><code>brew install emacs --cocoa
</code></pre>

<p>However, there is a problem: when an application is run from the Dock, it has only a very minimal environment, and it definitely does not get a PATH from any of the shell configuration files. Without this PATH, all kinds of things do not work. The first thing I noticed, was that python-mode was finding Mac OS’s builtin Python instead of my updated version.</p>

<h2 id="solution">Solution</h2>

<p>We need a trick to start the program (Emacs in this case) from the shell, instead of straight from the Dock. This way, the shell will start with the limited environment, but will load its own profile files, thus delivering the standard PATH and other settings. The solution <a href="https://korewanetadesu.com/emacs-on-os-x.html">was given here</a> <a href="https://superuser.com/questions/828716/how-to-create-a-mac-app-launcher-for-emacs-via-homebrew">and here</a>.</p>

<p>Cocretely, I have attached an Automator script to the Dock, that starts Emacs for me. The drawback is, that even if you give it the same icon, the running instance of Emacs will get a separate icon on the dock. I have not yet found a solution for this, and am experiencing the same on Windows 7. Not a problem.</p>

<p>The Automator code:</p>

<pre><code>echo '/Applications/Emacs.app/Contents/MacOS/Emacs "$@"' | bash --login -s &amp;&gt; /dev/null &amp;
</code></pre>

<p>The <code>&amp;&gt; /dev/null &amp;</code> part makes sure that the Automator task does not hang around waiting for the Emacs instance to exit or close its pipes. </p>

<footer>
  <p>
  </p>
  <div id="disqus_thread"></div>
  <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'pragtich'; // required: replace example with your forum shortname
  var disqus_identifier = 'EmacsPath';
            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
  </script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span>
  </a>
</footer>
</article>
  
<nav>
    <h2>All articles</h2> 
	<ul>
	  <li>
		<a href="http://pragti.ch/blog/index.html">Index of all articles</a> </li>

	</ul>
	<H2>Categories</h2>
    <ul>
	  
	    <li>
		  <a href="http://pragti.ch/categories/computer-stuff">computer stuff</a>
		</li>
	   
	  
	    <li>
		  <a href="http://pragti.ch/categories/life">life</a>
		</li>
	   
	  
	    <li>
		  <a href="http://pragti.ch/categories/kippycam">kippycam</a>
		</li>
	   
	  
	    <li>
		  <a href="http://pragti.ch/categories/blogging">blogging</a>
		</li>
	   
	  
    </ul>
	<h2>About</h2>
    <ul>
	  <li><a href="../../../../../about/">About me</a></li>
  </ul>
  </nav>
</body>
</html>
